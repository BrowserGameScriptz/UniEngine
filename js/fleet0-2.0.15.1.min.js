$(document).ready(function(){function a(a){a+="";var b=/(\d+)(\d\d\d)/;while(b.test(a)){a=a.replace(b,"$1"+"."+"$2")}return a}function b(a){a+="";a=a.replace(/[^0-9]/g,"");return a}$.fn.prettyInputBox=function(){return this.each(function(){if(AllowPrettyInputBox!==undefined&&AllowPrettyInputBox===true){Value=b($(this).val());Value=a(Value);$(this).val(Value)}})};$(".setACS_ID").click(function(){$("[name=getacsdata]").val($(this).val())});$(".FBeh").tipTip({maxWidth:"250px",delay:0,edgeOffset:8,attribute:"title"});$(".Speed").tipTip({maxWidth:"250px",delay:0,edgeOffset:8,attribute:"title"});$(".fInfo").tipTip({maxWidth:"300px",minWidth:"200px",delay:0,edgeOffset:8,attribute:"title"});$(".planet").tipTip({delay:0,edgeOffset:8,content:JSLang["fl_coordplanet"]});$(".moon").tipTip({delay:0,edgeOffset:8,content:JSLang["fl_coordmoon"]});$(".debris").tipTip({delay:0,edgeOffset:8,content:JSLang["fl_coorddebris"]});var c=$("#calcStorage");$('[name^="ship"]').keydown(function(a){if(a.which==38){var c=parseFloat(b($(this).val()));if(isNaN(c)){c=0}$(this).val(c+1).keyup()}else if(a.which==40){var c=parseFloat(b($(this).val()));if(isNaN(c)||c<=0){return false}$(this).val(c-1).keyup()}}).keyup(function(d){var e=parseInt(b($(this).val()),10);var f=$(this).data("oldCount");if(f===undefined||isNaN(f)){f=0}if(isNaN(e)){e=0}var g=e-f;if(g!=0){var h=b($(this).attr("name"));var i=parseInt(b(c.html()),10);i+=g*ShipsData["storage"][h];if(i>=TotalPlanetResources){c.removeClass("orange").addClass("lime")}else{c.removeClass("lime").addClass("orange")}c.html(a(i));$(this).data("oldCount",e);if(e>ShipsData["count"][h]){$(this).addClass("red")}else{$(this).removeClass("red")}}$(this).prettyInputBox()}).change(function(){$(this).keyup()}).focus(function(){if($(this).val()=="0"){$(this).val("")}}).blur(function(){if($(this).val()==""){$(this).val("0")}});$(".maxShip").click(function(){var a=$(this).parent().attr("class");var b=a.split(" ")[0].substr(2);$("#ship"+b).val(ShipsData["count"][b]).keyup()});$(".noShip").click(function(){var a=$(this).parent().attr("class");var b=a.split(" ")[0].substr(2);$("#ship"+b).val(0).keyup()});$(".maxShipAll").click(function(){$(".maxShip").click()});$(".noShipAll").click(function(){$(".noShip").click()});$(".addPad2").children(":not(.pad5)").addClass("pad2");if(JSShipSet!==false){for(var d in JSShipSet){$("#ship"+d).val(JSShipSet[d]).keyup()}}var e=$("#ACSUser_Invited");var f=$("#ACSUser_2Invite");var g=$('[name="acsuserschanged"]');$("#ACSUserAdd").click(function(){if($("option",e).length<ACSUsersMax+1){var a=f.children("option:selected");if(a.length>0){e.append($("<option></option>").attr("value",a.val()).text(a.text()));a.remove();g.val("1")}}});$("#ACSUserRmv").click(function(){var a=e.children("option:selected");if(a.length>0){if(!a.is(":disabled")){f.append($("<option></option>").attr("value",a.val()).text(a.text()));a.remove();g.val("1")}}});$("#ACSForm").submit(function(){var a="";e.children("option").each(function(){a+=$(this).val()+","});$('[name="acs_users"]').val(a)});$('[name^="ship"]').change()})