$(document).ready(function(){function c(a){$Seconds=parseFloat(a);$Days=Math.floor($Seconds/86400);$Seconds-=$Days*86400;$Hours=Math.floor($Seconds/3600);$Seconds-=$Hours*3600;$Minutes=Math.floor($Seconds/60);$Seconds-=$Minutes*60;if($Hours<10){$Hours="0"+$Hours+""}if($Minutes<10){$Minutes="0"+$Minutes+""}if($Seconds<10){$Seconds="0"+$Seconds+""}$Time="";if($Days>0){$Time=$Days+"d "}$Time+=$Hours+"g "+$Minutes+"m "+$Seconds+"s";return $Time}function b(a){a+="";a=a.replace(/[^0-9]/g,"");return a}function a(a){a+="";var b=/(\d+)(\d\d\d)/;while(b.test(a)){a=a.replace(b,"$1"+"."+"$2")}return a}$.fn.prettyInputBox=function(){return this.each(function(){if(AllowPrettyInputBox!==undefined&&AllowPrettyInputBox===true){Value=b($(this).val());Value=a(Value);$(this).val(Value)}})};var d=$("#nfoElements");var e=$("#nfoEl_0",d);var f=e;var g=null;var h=new Object;h["metal"]=0;h["crystal"]=0;h["deuterium"]=0;var i=0;var j=0;var k=false;var l=false;var m=1;if(ShowElementOnStartup===""){if(window.location.href.indexOf("#b_id_")!==-1){ShowElementOnStartup=window.location.href.match(/.*?\#b_id_([0-9]{1,})/);ShowElementOnStartup=ShowElementOnStartup[1]}}if($("#ssEl_"+ShowElementOnStartup).length){g=$("#nfoEl_"+ShowElementOnStartup,d);e.toggle();f=g.toggle().removeClass("hide");$("#ssEl_"+ShowElementOnStartup).find(".ssImg, .ssBg, .ssLvl").addClass("ssSelect")}$(".ssDiv").tipTip({delay:100});$(".tReqDiv").tipTip({delay:50});$(".endDate").tipTip({delay:100});$("b.infoResReq").tipTip({content:JSLang["InfoBox_ShowResReq"],edgeOffset:10,defaultPosition:"top",delay:50});$("b.infoTechReq").tipTip({content:JSLang["InfoBox_ShowTechReq"],edgeOffset:10,defaultPosition:"top",delay:50});$(".infoRes_metal").tipTip({content:JSLang["Metal"],defaultPosition:"top",delay:50});$(".infoRes_crystal").tipTip({content:JSLang["Crystal"],defaultPosition:"top",delay:50});$(".infoRes_deuterium").tipTip({content:JSLang["Deuterium"],defaultPosition:"top",delay:50});$(".infoRes_energy_max").tipTip({content:JSLang["Energy"],defaultPosition:"top",delay:50});$(".infoRes_darkEnergy").tipTip({content:JSLang["DarkEnergy"],defaultPosition:"top",delay:50});$(".ssDiv").hover(function(){$(this).find(".ssImg, .ssBg, .ssLvl").addClass("ssHover")},function(){$(this).find(".ssImg, .ssBg, .ssLvl").removeClass("ssHover")});$(".cancelQueue").click(function(){if(!$(this).hasClass("cancelQueue")){return true}if($(this).hasClass("premblock")){alert(JSLang["Queue_CantCancel_Premium"]);return false}else{return confirm(JSLang["Queue_ConfirmCancel"])}});$('[id^="ssEl_"]').hover(function(){if(g===null){ElementID=$(this).attr("id").replace("ssEl_","");e.toggle();f=$("#nfoEl_"+ElementID,d).removeClass("hide");if(!f.is(":visible")){f.toggle()}}},function(){if(g===null){f.toggle();f=e;e.toggle()}}).click(function(){if(g===null){var a="nfoEl_"+$(this).attr("id").replace("ssEl_","");if(a!=f.attr("id")){ElementID=$(this).attr("id").replace("ssEl_","");e.toggle();f=$("#nfoEl_"+ElementID,d).toggle().removeClass("hide")}ElementID=$(this).attr("id").replace("ssEl_","");g=$("#nfoEl_"+ElementID,d);$(this).find(".ssImg, .ssBg, .ssLvl").addClass("ssSelect").end().children("input").focus()}else{ElementID=$(this).attr("id").replace("ssEl_","");if(g.attr("id")!="nfoEl_"+ElementID){f.toggle();f=$("#nfoEl_"+ElementID,d).toggle().removeClass("hide");g=$("#nfoEl_"+ElementID,d);$(".ssSelect").removeClass("ssSelect");$(this).find(".ssImg, .ssBg, .ssLvl").addClass("ssSelect").end().children("input").focus()}else{g=null;$(this).find(".ssImg, .ssBg, .ssLvl").removeClass("ssSelect").end().children("input").blur()}}});$(".reqSelector").click(function(){if(!$(this).hasClass("reqSelected")){var a=$(this).parent();a.children(".reqSelected").removeClass("reqSelected");$(this).addClass("reqSelected");if($(this).hasClass("infoResReq")){$("div.infoResReq",a).show(0).removeClass("hide");$("div.infoTechReq",a).hide(0)}else{$("div.infoTechReq",a).show(0).removeClass("hide");$("div.infoResReq",a).hide(0)}}});$("a.buildDo_Gray, a.destroyDo_Gray").click(function(){return false});$("#buttonC").click(function(){if(!$(this).hasClass("construct_Gray")){$("#shipyardForm").submit()}return false});$(".maxDo").click(function(){var a=$(this).parent();if(a.children(".ssDis").length>0){return false}isSelected=a.children(".ssBg").hasClass("ssSelect");k=true;$(".ssInput").val("").keyup();a.children(".ssInput").val($("#maxConst_"+a.attr("id").replace("ssEl_","")).html()).keyup();if(isSelected){return false}});var n=$("#timeC");var o=$("#buttonC");$(".ssInput").click(function(){if($(this).parent().children(".ssBg").hasClass("ssSelect")){return false}}).keypress(function(a){var b=a.keyCode?a.keyCode:a.which;if(b==13){o.click()}}).keyup(function(){ThisCount=parseFloat(b($(this).val()));OldCount=$(this).data("oldCount");if(OldCount===undefined||isNaN(OldCount)){OldCount=0}if(isNaN(ThisCount)){ThisCount=0}Difference=ThisCount-OldCount;if(Difference!=0){$(this).data("oldCount",ThisCount);ThisElementID=$(this).attr("name").replace("elem[","").replace("]","");for(var d in ShipPrices[ThisElementID]){h[d]+=ShipPrices[ThisElementID][d]*Difference}i+=ShipTimes[ThisElementID]*Difference;j+=Difference;for(var d in h){ThisSelector=$("#resC_"+d);ThisSelector.html(a(h[d]));if(h[d]>Resources[d]){if(!ThisSelector.hasClass("red")){ThisSelector.addClass("red")}}else{if(ThisSelector.hasClass("red")){ThisSelector.removeClass("red")}}}n.html(c(i));if(j>0){if(o.hasClass("construct_Gray")){o.removeClass("construct_Gray").addClass("construct_Green")}}else{if(o.hasClass("construct_Green")){o.removeClass("construct_Green").addClass("construct_Gray")}}if(ThisCount>b($("#maxConst_"+ThisElementID).html())){$(this).addClass("red")}else{$(this).removeClass("red")}$(this).prettyInputBox()}}).change(function(){$(this).keyup()}).focus(function(a){if(k===false&&$(this).val()!=""){$(this).val("").keyup()}k=false;var b=$(this).parent();if(!b.children("img").hasClass("ssSelect")){b.click();a.preventDefault()}}).keydown(function(a){if(a.which==38){var c=parseFloat(b($(this).val()));if(isNaN(c)){c=0}$(this).val(c+1).change()}else if(a.which==40){var c=parseFloat(b($(this).val()));if(isNaN(c)||c<=0){return false}$(this).val(c-1).change()}});if(RunQueueHandler==="true"){var p=new Object;p["tr"]=new Object;p["count"]=new Object;l=setInterval(function(){if(p["tr"][m]===undefined){p["tr"][m]=$("#queueID_"+m);if(p["tr"][m].length>0){p["count"][m]=p["tr"][m].find(".count")}else{clearInterval(l);return false}}QueueArray[m]["Count"]-=QueueArray[m]["Remove"];if(QueueArray[m]["Count"]>0){p["count"][m].html(a(Math.ceil(QueueArray[m]["Count"])))}else{p["tr"][m].remove();m+=1}},100)}})