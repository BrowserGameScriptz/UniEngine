$(document).ready(function(){function c(c){if(c===undefined){c=false}var d=b($('[name="'+NameResM+'"]').val());var e=b($('[name="'+NameResA+'"]').val());var f=b($('[name="'+NameResB+'"]').val());if(c===false){if(Mode==1){var g=Math.ceil(e*Mod_ResA+f*Mod_ResB)}else if(Mode==2){var g=Math.floor(e*Mod_ResA+f*Mod_ResB)}$("#MainRes").val(a(g))}else{if(Mode==1){e=Math.floor(d*(parseInt($('[name="'+NameResA+'Percent"]').val())/100)/Mod_ResA);f=Math.floor(d*(parseInt($('[name="'+NameResB+'Percent"]').val())/100)/Mod_ResB);$('[name="'+NameResA+'"]').val(e).prettyInputBox(true);$('[name="'+NameResB+'"]').val(f).prettyInputBox(true)}else if(Mode==2){e=Math.floor(d*(parseInt($('[name="'+NameResA+'Percent"]').val())/100)/Mod_ResA);f=Math.floor(d*(parseInt($('[name="'+NameResB+'Percent"]').val())/100)/Mod_ResB);$('[name="'+NameResA+'"]').val(e).prettyInputBox(true);$('[name="'+NameResB+'"]').val(f).prettyInputBox(true)}}if(Mode==1){if(d>MaxResM){$('[name="'+NameResM+'"]').addClass("resRed")}else{if($('[name="'+NameResM+'"]').hasClass("resRed")){$('[name="'+NameResM+'"]').removeClass("resRed")}}}else{if(e>MaxResA){$('[name="'+NameResA+'"]').addClass("resRed")}else{if($('[name="'+NameResA+'"]').hasClass("resRed")){$('[name="'+NameResA+'"]').removeClass("resRed")}}if(f>MaxResB){$('[name="'+NameResB+'"]').addClass("resRed")}else{if($('[name="'+NameResB+'"]').hasClass("resRed")){$('[name="'+NameResB+'"]').removeClass("resRed")}}}}function b(a){a+="";a=a.replace(/[^0-9]/g,"");return a}function a(a){a+="";var b=/(\d+)(\d\d\d)/;while(b.test(a)){a=a.replace(b,"$1"+"."+"$2")}return a}$.fn.notEmptyVal=function(a,c){ThisVal=$(this).val();if(!!c){ThisVal=b(ThisVal)}if(!!a){if(ThisVal!=""&&ThisVal>=0){return true}else{return false}}else{if(ThisVal!=""&&ThisVal>0){return true}else{return false}}};$.fn.prettyInputBox=function(b){return this.each(function(){if(AllowPrettyInputBox!==undefined&&AllowPrettyInputBox===true||b!==undefined&&b===true){Value=$(this).val();if(Value.indexOf(".")!==-1){Value=Value.replace(/\./g,"")}Value=a(Value);$(this).val(Value)}})};$('[name="met"],[name="cry"],[name="deu"]').change(function(){$(this).val(b($(this).val()));if($(this).attr("name")!=NameResM){c()}else{c(true)}$(this).prettyInputBox(true)}).keyup(function(){$(this).change()}).keydown(function(a){if(a.which==38){var c=parseFloat(b($(this).val()));if(isNaN(c)){c=0}$(this).val(c+1).change()}else if(a.which==40){var c=parseFloat(b($(this).val()));if(isNaN(c)||c<=0){return false}$(this).val(c-1).change()}}).focus(function(){if(!$(this).notEmptyVal(false,true)){$(this).val("")}}).blur(function(){if(!$(this).notEmptyVal(true,true)){$(this).val("0")}});$("#max"+NameResM).click(function(){if(Mode==1){$('[name="'+NameResM+'"]').val(Math.floor(MaxResM)).change()}else if(Mode==2){$('[name="'+NameResA+'"]').val(Math.floor(MaxResA)).change();$('[name="'+NameResB+'"]').val(Math.floor(MaxResB)).change()}return false});$("#max"+NameResA).click(function(){if(Mode==1){$('[name="'+NameResA+'"]').val(Math.floor(MaxResM/Mod_ResA)).change();$("#zero"+NameResB).click();$('[name="'+NameResA+'Percent"]').val(100).change()}else if(Mode==2){$('[name="'+NameResA+'"]').val(Math.floor(MaxResA)).change()}return false});$("#max"+NameResB).click(function(){if(Mode==1){$('[name="'+NameResB+'"]').val(Math.floor(MaxResM/Mod_ResB)).change();$("#zero"+NameResA).click();$('[name="'+NameResB+'Percent"]').val(100).change()}else if(Mode==2){$('[name="'+NameResB+'"]').val(Math.floor(MaxResB)).change()}return false});$("#zero"+NameResM).click(function(){$('[name="'+NameResM+'"]').val("0").change();return false});$("#zero"+NameResA).click(function(){$('[name="'+NameResA+'"]').val("0").change();return false});$("#zero"+NameResB).click(function(){$('[name="'+NameResB+'"]').val("0").change();return false});$(".modif").click(function(){var a=$('[name="'+$(this).parent().children("input.percent").attr("name")+'"]');if($(this).val()=="+"){AddValue=1}else{AddValue=-1}a.val(parseInt(a.val())+AddValue);a.change()});$("input.percent").change(function(){if($(this).attr("name")==NameResA+"Percent"){var a=$('[name="'+NameResB+'Percent"]')}else{var a=$('[name="'+NameResA+'Percent"]')}if($.isNumeric($(this).val())){var b=parseInt($(this).val());if(b>100){b=100}else if(b<0){b=0}$(this).val(b);a.val(100-b)}else{$(this).val(0);a.val(100)}c(true)}).keyup(function(a){$(this).change();return false}).keypress(function(a){if(a.which==13){return false}}).keydown(function(a){if(a.which==38){var c=parseFloat(b($(this).val()));if(isNaN(c)){c=0}else{if(c>=100){return false}}$(this).val(c+1).change()}else if(a.which==40){var c=parseFloat(b($(this).val()));if(isNaN(c)||c<=0){return false}$(this).val(c-1).change()}});$("th").css("padding","3px")})